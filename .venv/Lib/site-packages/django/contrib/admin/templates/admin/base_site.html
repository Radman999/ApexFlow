{% extends "admin/base.html" %}

{% block title %}{% if subtitle %}{{ subtitle }} | {% endif %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block branding %}
<div id="site-name"><a href="{% url 'admin:index' %}">{{ site_header|default:_('Django administration') }}</a></div>
  <nav id="admin-nav-menu">
    <ul>
      <li><a href="#" id="refreshApiLink">Refresh API</a></li>
      <li><a href="#" id="refreshApiLinkUnit">Refresh API Unit</a></li>
    </ul>
  </nav>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
    $("#refreshApiLink").click(function(e) {
        e.preventDefault();  // Prevent the default anchor behavior
        
        $.ajax({
            url: "{% url 'refresh_api' %}",
            type: "GET",
            success: function(response) {
                alert(response.message);  // Alert the response message
                window.location.reload();  // Refresh the page after the alert
            },
            error: function(xhr) {
                alert('Error: ' + xhr.statusText);  // Alert any error if occurred
            }
        });
    });

    $("#refreshApiLinkUnit").click(function(e) {
        e.preventDefault();  // Prevent the default anchor behavior
        
        $.ajax({
            url: "{% url 'refresh_api_unit' %}",
            type: "GET",
            success: function(response) {
                alert(response.message);  // Alert the response message
                window.location.reload();  // Refresh the page after the alert
            },
            error: function(xhr) {
                alert('Error: ' + xhr.statusText);  // Alert any error if occurred
            }
        });
    });
});
</script>
{% if user.is_anonymous %}
  {% include "admin/color_theme_toggle.html" %}
{% endif %}
{% endblock %}

{% block nav-global %}

{% endblock %}
